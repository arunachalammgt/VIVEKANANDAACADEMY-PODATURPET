<!DOCTYPE html>
<html lang="ta">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>மாணவர் சேர்க்கை படிவம்</title>

<style>
*{
    box-sizing:border-box;
    font-family:"Poppins",Arial,sans-serif;
}

body{
    margin:0;
    min-height:100vh;
    background:#222;
}

.overlay{
    min-height:100vh;
    background:rgba(0,0,0,0.6);
    padding:30px 0;
}

header{
    text-align:center;
    color:#fff;
    font-size:28px;
    font-weight:600;
    margin-bottom:20px;
}

.form-container{
    width:92%;
    max-width:950px;
    margin:auto;
    padding:30px;
    background:rgba(255,255,255,0.15);
    backdrop-filter:blur(14px);
    border-radius:18px;
    color:#fff;
}

.section{ margin-bottom:30px; }

.section h2{
    margin-bottom:15px;
    border-bottom:2px solid rgba(255,255,255,0.4);
    padding-bottom:8px;
}

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
    gap:15px;
}

input, select, textarea{
    width:100%;
    padding:12px;
    border:none;
    border-radius:10px;
    font-size:15px;
}

textarea{ resize:none; height:90px; }

button{
    width:100%;
    padding:15px;
    font-size:18px;
    border:none;
    border-radius:14px;
    background:#ff6600;
    color:#fff;
    cursor:pointer;
}
</style>
</head>

<body>

<div class="overlay">
<header>மாணவர் சேர்க்கை படிவம்</header>

<form class="form-container" id="admissionForm">

<!-- STUDENT DETAILS -->
<div class="section">
<h2>1. மாணவர் தகவல்</h2>

<div class="grid">
<input name="studentName" placeholder="முழு பெயர்" required>
<input name="dob" type="date" required>
<input name="age" type="number" placeholder="வயது" required>

<select name="gender" required>
<option value="">பாலினம்</option>
<option>ஆண்</option>
<option>பெண்</option>
<option>மற்றவை</option>
</select>

<input name="school" placeholder="பள்ளி பெயர்" required>

<select name="medium" required>
<option value="">மொழி</option>
<option>தமிழ்</option>
<option>ஆங்கிலம்</option>
</select>

<select name="joiningClass" required>
<option value="">சேர்க்கை வகுப்பு</option>
<option>1ஆம் வகுப்பு</option>
<option>2ஆம் வகுப்பு</option>
<option>3ஆம் வகுப்பு</option>
<option>4ஆம் வகுப்பு</option>
<option>5ஆம் வகுப்பு</option>
<option>6ஆம் வகுப்பு</option>
<option>7ஆம் வகுப்பு</option>
<option>8ஆம் வகுப்பு</option>
<option>9ஆம் வகுப்பு</option>
<option>10ஆம் வகுப்பு</option>
<option>11ஆம் வகுப்பு</option>
<option>12ஆம் வகுப்பு</option>
</select>

<textarea name="address" placeholder="முகவரி" required></textarea>
</div>
</div>

<!-- PARENT DETAILS -->
<div class="section">
<h2>2. பெற்றோர் / பாதுகாவலர் தகவல்</h2>

<div class="grid">
<select name="relation" required>
<option value="">தந்தை / தாய் / பாதுகாவலர்</option>
<option>தந்தை</option>
<option>தாய்</option>
<option>பாதுகாவலர்</option>
</select>

<input name="parentName" placeholder="பெயர்" required>
<input name="mobile" placeholder="மொபைல் எண்" required>
<input name="alternateMobile" placeholder="மாற்று எண்">
<input name="occupation" placeholder="வேலை / தொழில்" required>
</div>
</div>

<!-- CLASS DETAILS -->
<div class="section">
<h2>3. வகுப்பு / பாடப்பிரிவு</h2>

<div class="grid">
<input name="subjects" placeholder="தேவைப்படும் பாடங்கள்" required>

<select name="batch" required>
<option value="">Batch</option>
<option>REGULAR</option>
<option>SAT & SUNDAY</option>
</select>
</div>
</div>

<button type="submit">சமர்ப்பிக்கவும்</button>

</form>
</div>

<!-- SUBMISSION SCRIPT -->
<script>
document.getElementById("admissionForm").addEventListener("submit", async function(e){
    e.preventDefault();

    const formData = new FormData(this);
    const data = Object.fromEntries(formData.entries());

    try {
        await fetch("/api/admission", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(data)
        });

        // Always redirect to success page
        window.location.href = "success.html";

    } catch {
        window.location.href = "success.html";
    }
});
</script>

</body>
</html>
